@format=0

resource File(p)

File state permissions(u,g,m) { }

global enum os {
  ubuntu,
  debian
}

enum os ~> family {
  ubuntu -> debian,
  debian -> debian
}

enum outcome {
  kept,
  repaired,
  error
}

resource ntp ()

ntp state configuration ()
{
  File("/tmp").permissions("root", "x$${root}i${youpi}2", "g+w") as outvar

  case {
    outvar =~ kept => file("/tmp").permissions("root", "root", "g+w"),
    outvar =~ repaired => file("/tmp").permissions("user", "user", "g+w"),
    outvar =~ error => file("/tmp").permissions("user", "user", "g+w")
  }
  case {
    ubuntu => file("/tmp").permissions("root", "root", "g+w"),
    os:debian => file("/tmp").permissions("user", "user", "g+w")
  }
}
